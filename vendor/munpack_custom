#!/bin/sh

# set -x

print_usage() {
	printf '\n%s\n' "$(basename $0) -C DIRECTORY"
}

directory=""
while getopts ":C:" opt
do
    case ${opt} in
        C)
            directory="${OPTARG}"
            ;;
        \?)
            echo "Invalid option: -$OPTARG" >&2 
            exit 1
            ;;
    esac
done
shift $((OPTIND - 1))

if [ ! ${#} -eq 0 ]
then
	print_usage
	exit 1
fi

if [ -z "${directory}" ]
then
	print_usage
	exit 1
fi

if [ ! -e "${directory}" ]
then
    mkdir "${directory}"
fi

munpack -f -C "${directory}" <&0
